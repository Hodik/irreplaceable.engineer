---
import type { ImageMetadata } from "astro";
import BulletList from "./BulletList.astro";

interface Props {
  previewImage?: ImageMetadata;
  previewAlt?: string;
  bullets?: string[];
}

const { previewImage, previewAlt = "Preview", bullets } = Astro.props;
---

<div class="visual">
  {previewImage && <img class="preview" src={previewImage.src} alt={previewAlt} />}
  {bullets && <BulletList items={bullets} variant="mobile" />}
  <slot />
</div>

<style>
  .visual {
    grid-column: 2;
    grid-row: 2;
    position: relative;
    height: min(70svh, 560px);
    display: flex;
    flex-direction: column;
    align-items: flex-end;
    justify-content: center;
    gap: 1.5rem;
    margin-right: clamp(2rem, 6vw, 8rem);
  }

  .preview {
    width: min(420px, 42vw);
    height: auto;
    object-fit: contain;
    border-radius: 16px;
    box-shadow:
      0 8px 40px rgba(0, 0, 0, 0.8),
      0 0 0 1px rgba(255, 255, 255, 0.06);
  }

  @media (min-width: 981px) and (max-width: 1400px) {
    .visual {
      height: min(65svh, 480px);
      margin-right: clamp(1rem, 4vw, 4rem);
    }

    .preview {
      width: min(100%, 420px);
    }
  }

  @media (max-width: 980px) {
    .visual {
      order: 2;
      display: contents;
    }

    .preview {
      position: static;
      width: 100%;
      max-width: 100%;
      max-height: none;
      height: auto;
      order: 2;
    }

    .visual :global(.bullets-mobile) {
      order: 3;
    }

    .visual > :global(*:not(.preview):not(.landing-bullets)) {
      order: 4;
    }
  }
</style>
